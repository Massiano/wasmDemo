// index.ts
export function applyGrayscale(len: i32): void {
  for (let i = 0; i < len; i += 4) {
    let r = load<u8>(i);
    let g = load<u8>(i + 1);
    let b = load<u8>(i + 2);
    let avg = <u8>(0.299 * r + 0.587 * g + 0.114 * b);
    store<u8>(i, avg);
    store<u8>(i + 1, avg);
    store<u8>(i + 2, avg);
  }
}
